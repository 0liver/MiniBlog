(function(n){function i(i,r,u){confirm("Do you want to delete this comment?")&&n.post(t,{mode:"delete",postId:r,commentId:i}).success(function(){u.slideUp(function(){u.remove()})}).fail(function(){alert("Something went wrong. Please try again")})}function r(i,r,u,f,e,o){localStorage&&(localStorage.setItem("name",i),localStorage.setItem("email",r),localStorage.setItem("website",u));n.post(t,{mode:"save",postId:e,name:i,email:r,website:u,content:f}).success(function(t){n("#status").text("Your comment has been added").removeClass("alert-danger").addClass("alert-success");n("#commentcontent").val("");n.get(t,function(t){var i=n(t).hide();n("#comments").append(i);i.slideDown();o(!0)})}).error(function(t){n("#status").addClass("alert-danger").text(t.statusText);o(!1)})}function u(){var u=n("[itemprop='blogPost']").attr("data-id"),f=n("#commentemail"),t=n("#commentname"),e=n("#commenturl"),o=n("#commentcontent");n(document).on("submit","#commentform",function(i){i.preventDefault();var s=n(i.target);s.attr("disabled",!0);r(t.val(),f.val(),e.val(),o.val(),u,function(){s.removeAttr("disabled")})});n(document).on("click",".deletecomment",function(t){t.preventDefault();var f=n(t.target),r=f.parents("[itemprop='comment']");i(r.attr("data-id"),u,r)});localStorage&&(f.val(localStorage.getItem("email")),e.val(localStorage.getItem("website")),t.val().length===0&&t.val(localStorage.getItem("name")))}var t="/comment.ashx";n(function(){n("#commentform").get(0)&&u()})})(jQuery);